<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>MapLibre + deck.gl ArcLayer</title>
  <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #map { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- MapLibre -->
  <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
  <!-- Deck.gl -->
  <script src="https://unpkg.com/deck.gl@9.1.14/dist.min.js"></script>
  <!-- Deck.gl Mapbox integration -->
  <script src="https://unpkg.com/@deck.gl/mapbox@9.1.14/dist.min.js"></script>

  <script>
    const map = new maplibregl.Map({
      container: "map",
      style: "https://demotiles.maplibre.org/style.json",
      center: [2.17, 41.38], // Barcelona
      zoom: 11
    });

    const data = [
      { from: [2.17, 41.38], to: [2.10, 41.40], value: 10 },
      { from: [2.17, 41.38], to: [2.20, 41.35], value: 30 }
    ];

    const arcLayer = new deck.MapboxLayer({
      id: "arc-layer",
      type: deck.ArcLayer,
      data,
      getSourcePosition: d => d.from,
      getTargetPosition: d => d.to,
      getSourceColor: [0, 128, 255],
      getTargetColor: [255, 0, 128],
      getWidth: d => Math.sqrt(d.value),
      pickable: true,
      onClick: info => {
        if (info.object) alert(`Clicked arc with value ${info.object.value}`);
      }
    });

    map.on("load", () => {
      map.addLayer(arcLayer);
    });
  </script>
</body>
</html>
